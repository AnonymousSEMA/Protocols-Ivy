implementation command: ./picoquicdemo -e implem -c /PFV/implementations/quic-implementations//picoquic//certs/cert.pem -T /PFV/tickets/ticket.bin -l - -k /PFV/implementations/quic-implementations//picoquic//certs/key.pem -a ALPN -v VERSION -D -L -n servername 11.0.0.1 4443
/PFV/Protocols-Ivy/protocol-testing/quic/test/temp/2/quic_client_test_deadconnection_signal (0) ...
/PFV/Protocols-Ivy/protocol-testing/quic/test/temp/2/quic_client_test_deadconnection_signal0.out
/PFV/Protocols-Ivy/protocol-testing/quic/test/temp/2/quic_client_test_deadconnection_signal0.err
/PFV/Protocols-Ivy/protocol-testing/quic/test/temp/2/quic_client_test_deadconnection_signal0.iev
looped: 1
Resetting the implementation command
Starting the implementation
Updating implementation:
exec ./picoquicdemo -e lo -c /PFV/loentations/quic-implementations//picoquic//certs/cert.pem -T /PFV/tickets/ticket.bin -l - -k /PFV/loentations/quic-implementations//picoquic//certs/key.pem -a hq-29 -v ff00001d -D -L -n servername 11.0.0.1 4443
implementation command: RUST_LOG="debug" RUST_BACKTRACE=1 exec ./picoquicdemo -e lo -c /PFV/loentations/quic-implementations//picoquic//certs/cert.pem -T /PFV/tickets/ticket.bin -l - -k /PFV/loentations/quic-implementations//picoquic//certs/key.pem -a hq-29 -v ff00001d -D -L -n servername 11.0.0.1 4443
implementation diretory: /PFV/implementations/quic-implementations//picoquic
True
Generate shadow config
Generating tester command
quic_client_test_deadconnection_signal
shadow test:
IVY_INCLUDE_PATH ${IVY_INCLUDE_PATH}:/usr/local/lib/python2.7/dist-packages/ms_ivy-1.8.24-py2.7.egg/ivy/include/1.7
Z3_LIBRARY_DIRS /PFV/Protocols-Ivy//submodules/z3/build
Z3_LIBRARY_PATH /PFV/Protocols-Ivy//submodules/z3/build;
LD_LIBRARY_PATH ${LD_LIBRARY_PATH}:/PFV/Protocols-Ivy//submodules/z3/build
PROOTPATH /PFV
PYTHONPATH ${PYTHONPATH}:/PFV/implementations/$PROT-implementations//aioquic:/PFV/Protocols-Ivy//submodules/z3/build/python
PATH /shadow/cmake-3.26.4-linux-x86_64/bin:/root/.cargo/bin:/root/.local/bin:/root/.cargo/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/go/bin:/PFV/Protocols-Ivy//submodules/z3/build
LOSS 0.0
LATENCY 10
JITTER 10
INITIAL_VERSION 29
TEST_IMPL picoquic
TEST_ALPN hq-29
SSLKEYLOGFILE /PFV/tls-keys/picoquic_key.log
CNT 1
TEST_TYPE client
general:
  # stop after 10 simulated seconds
  stop_time: 300s
  # old versions of cURL use a busy loop, so to avoid spinning in this busy
  # loop indefinitely, we add a system call latency to advance the simulated
  # time when running non-blocking system calls
  model_unblocked_syscall_latency: false
  
experimental:
  strace_logging_mode: "standard"

network:
  graph:
    # use a built-in network graph containing
    # a single vertex with a bandwidth of 1 Gbit
    # type: 1_gbit_switch
    type: gml
    # file:
    # path: /PFV/topo.gml
    inline: |
      graph [
        directed 0
        node [
          id 0
          host_bandwidth_down "100 Gbit"
          host_bandwidth_up "100 Gbit"
        ]
        edge [
          source 0
          target 0
          latency "10 ms"
          jitter "10 ms"
          packet_loss 0.0
        ]
      ]

host_option_defaults:
  pcap_enabled: true

# TODO modify config
hosts:
  # a host with the hostname 'server'
  server:
    network_node_id: 0
    ip_addr: "11.0.0.1"
    processes:
    - path: /PFV/Protocols-Ivy/protocol-testing/quic/build//quic_client_test_deadconnection_signal
      args:  seed=192 the_cid=1 server_port=4443 iversion=29 server_addr=184549377 modify_packets=false  
      start_time: 1s
      environment:
          PROOTPATH: /PFV
          PATH: /root/.local/bin:/root/.cargo/bin:/root/.cargo/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/go/bin
          ZRTT_SSLKEYLOGFILE: /PFV/Protocols-Ivy/doc/examples/quic/last_tls_key.txt
          RETRY_TOKEN_FILE: /PFV/Protocols-Ivy/doc/examples/quic/last_retry_token.txt
          NEW_TOKEN_FILE: /PFV/Protocols-Ivy/doc/examples/quic/last_new_token.txt
          ENCRYPT_TICKET_FILE: /PFV/Protocols-Ivy/doc/examples/quic/last_encrypt_session_ticket.txt          
          SESSION_TICKET_FILE: /PFV/Protocols-Ivy/doc/examples/quic/last_session_ticket_cb.txt
          SAVED_PACKET: /PFV/Protocols-Ivy/doc/examples/quic/saved_packet.txt
          initial_max_stream_id_bidi: /PFV/Protocols-Ivy/doc/examples/quic/initial_max_stream_id_bidi.txt
          active_connection_id_limit: /PFV/Protocols-Ivy/doc/examples/quic/active_connection_id_limit.txt
          initial_max_stream_data_bidi_local: /PFV/Protocols-Ivy/doc/examples/quic/initial_max_stream_data_bidi_local.txt
          initial_max_stream_data_bidi_remote: /PFV/Protocols-Ivy/doc/examples/quic/initial_max_stream_data_bidi_remote.txt
          initial_max_stream_data_uni: /PFV/Protocols-Ivy/doc/examples/quic/initial_max_stream_data_uni.txt
          initial_max_data: /PFV/Protocols-Ivy/doc/examples/quic/initial_max_data.txt
          INITIAL_VERSION: "29"
          TEST_TYPE: client
          TEST_IMPL: picoquic
          TEST_ALPN: hq-29
          # TIMEOUT_IVY: "15"
          SSLKEYLOGFILE: /PFV/tls-keys/picoquic_key.log
          # TODO
          CNT: "0"

  client:
    network_node_id: 0
    # pcap_enabled: true
    ip_addr: "11.0.0.2"
    processes:
    # - path: /PFV/implementations/quic-implementations/ping-pong/miniP_client
    #   args: -i 11.0.0.1 -p 4443
    - path: /PFV/implementations/quic-implementations//picoquic/./picoquicdemo
      args: -c /PFV/implementations/quic-implementations//picoquic//certs/cert.pem -T /PFV/tickets/ticket.bin -l - -k /PFV/implementations/quic-implementations//picoquic//certs/key.pem -a hq-29 -v ff00001d -D -L -n servername 11.0.0.1 4443
      start_time: 5s

rm -r /PFV/shadow.data/ 
command: RUST_BACKTRACE=full shadow /PFV/shadow_client_test.yml > shadow.log
PASS
